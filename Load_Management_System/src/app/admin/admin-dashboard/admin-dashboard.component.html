<div class="admin-dashboard">
  <h2>Admin Dashboard</h2>
  <button (click)="logout()">Logout</button>

  <nav>
    <button (click)="setSection('customers')">Customers</button>
    <button (click)="setSection('officers')">Loan Officers</button>
    <button (click)="setSection('loans')">Loans</button>
    <button (click)="setSection('bg')">Background Verifications</button>
    <button (click)="setSection('loanVer')">Loan Verifications</button>
    <button (click)="setSection('help')">Help Reports</button>
    <button (click)="setSection('feedbackQuestions')">Feedback Questions</button>
    <button (click)="setSection('customerFeedback')">Customer Feedback</button>
  </nav>

  <section *ngIf="active === 'customers'">
    <h3>Customers</h3>
    <table>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Email</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let c of customers">
        <td>{{ c.id }}</td>
        <td>{{ c.fullName }}</td>
        <td>{{ c.email }}</td>
        <td>{{ c.status }}</td>
        <td>
          <button (click)="approveCustomer(c.id)">Approve</button>
          <button (click)="rejectCustomer(c.id)">Reject</button>
        </td>
      </tr>
    </table>
  </section>

  <section *ngIf="active === 'officers'">
    <h3>Loan Officers</h3>
    <table>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Email</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let o of officers">
        <td>{{ o.id }}</td>
        <td>{{ o.fullName }}</td>
        <td>{{ o.email }}</td>
        <td>{{ o.status }}</td>
        <td>
          <button (click)="approveOfficer(o.id)">Approve</button>
          <button (click)="rejectOfficer(o.id)">Reject</button>
        </td>
      </tr>
    </table>
  </section>

  <section *ngIf="active === 'loans'">
    <h3>Loan Requests</h3>
    <table>
      <tr>
        <th>Id</th>
        <th>Customer</th>
        <th>Amount</th>
        <th>Status</th>
      </tr>
      <tr *ngFor="let l of loans">
        <td>{{ l.id }}</td>
        <td>{{ l.customer?.fullName }}</td>
        <td>{{ l.amount }}</td>
        <td>{{ l.status }}</td>
      </tr>
    </table>
  </section>

  <section *ngIf="active === 'bg'">
    <h3>Background Verifications</h3>
    <table>
      <tr>
        <th>Id</th>
        <th>LoanId</th>
        <th>Status</th>
        <th>Remarks</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let v of bgVerifications">
        <td>{{ v.id }}</td>
        <td>{{ v.loanRequestId }}</td>
        <td>{{ v.status }}</td>
        <td>{{ v.remarks }}</td>
        <td>
          <button (click)="editBg(v)">Edit</button>
          <button (click)="deleteBg(v.id)">Delete</button>
        </td>
      </tr>
    </table>

    <div *ngIf="selectedBg?.id">
      <h4>Edit Background Verification #{{ selectedBg.id }}</h4>
      <label>Status</label>
      <input [(ngModel)]="selectedBg.status" name="bgStatus" />
      <label>Remarks</label>
      <input [(ngModel)]="selectedBg.remarks" name="bgRemarks" />
      <button (click)="saveBg()">Save</button>
    </div>
  </section>

  <section *ngIf="active === 'loanVer'">
    <h3>Loan Verifications</h3>
    <table>
      <tr>
        <th>Id</th>
        <th>LoanId</th>
        <th>Status</th>
        <th>Remarks</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let v of loanVerifications">
        <td>{{ v.id }}</td>
        <td>{{ v.loanRequestId }}</td>
        <td>{{ v.status }}</td>
        <td>{{ v.remarks }}</td>
        <td>
          <button (click)="editLoanVer(v)">Edit</button>
          <button (click)="deleteLoanVer(v.id)">Delete</button>
        </td>
      </tr>
    </table>

    <div *ngIf="selectedLoanVer?.id">
      <h4>Edit Loan Verification #{{ selectedLoanVer.id }}</h4>
      <label>Status</label>
      <input [(ngModel)]="selectedLoanVer.status" name="loanVerStatus" />
      <label>Remarks</label>
      <input [(ngModel)]="selectedLoanVer.remarks" name="loanVerRemarks" />
      <button (click)="saveLoanVer()">Save</button>
    </div>
  </section>

  <section *ngIf="active === 'help'">
    <h3>Help Reports</h3>
    <div *ngFor="let r of helpReports">
      <p><strong>{{ r.title }}</strong> - {{ r.description }}</p>
      <textarea [(ngModel)]="r.response" name="resp{{ r.id }}"></textarea>
      <button (click)="updateHelpReport(r)">Save</button>
    </div>
  </section>

  <section *ngIf="active === 'feedbackQuestions'">
    <h3>Feedback Questions</h3>
    <ul>
      <li *ngFor="let q of feedbackQuestions">
        <input [(ngModel)]="q.questionText" name="q{{ q.id }}" />
        <button (click)="updateFeedbackQuestion(q)">Update</button>
      </li>
    </ul>

    <h4>Add New Question</h4>
    <input [(ngModel)]="newFeedbackQuestion.questionText" name="newQ" />
    <button (click)="addFeedbackQuestion()">Add</button>
  </section>

  <section *ngIf="active === 'customerFeedback'">
    <h3>Customer Feedback</h3>
    <ul>
      <li *ngFor="let f of customerFeedback">
        <strong>{{ f.customerName }}:</strong> {{ f.comment }}
      </li>
    </ul>
  </section>
</div>


